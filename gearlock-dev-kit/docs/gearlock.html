<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="author" content="AXON, https://supreme-gamers.com">
<meta name="description" content="GearLock Documentation">
<title>Get Started | GearLock Documentation</title>
<link rel="stylesheet" href="gearlock/themes/grl/styles/main.min.css" type="text/css" />
<link rel="stylesheet" href="gearlock/themes/grl/styles/highlightjs-github.css" type="text/css" />
</head>
<body>
<aside class="main-nav">
<nav>
<ul>
<li class="menuitem active">
<a href="gearlock.html" data-shortcut="">
Get Started
</a>
</li>
<li class="menuitem ">
<a href="gearlock/gearlock-dev-utils.html" data-shortcut="">
GearLock Dev Utils
</a>
</li>
<li class="menuitem ">
<a href="gearlock/gearlock-user-utils.html" data-shortcut="">
GearLock User Utils
</a>
</li>
<li class="menuitem ">
<a href="gearlock/environment-variables.html" data-shortcut="">
Environment Variables
</a>
</li>
<li class="menuitem ">
<a href="gearlock/gearboot-documentation.html" data-shortcut="">
GearBoot Documentation
</a>
</li>
<li class="menuitem ">
<a href="gearlock/customize-integrate-gearlock.html" data-shortcut="">
Integrate / Customize GearLock
</a>
</li>
<li class="menuitem ">
<a href="gearlock/package-extension-submission.html" data-shortcut="">
Package / Extension Submission
</a>
</li>
</ul>
</nav>
</aside>
<main class="main-content">
<article class="article">
<h1>GearLock Documentation Index</h1>
<h2>Introduction</h2>
<p>First of all, you will need basic scripting knowledge in bash. Not only that, if you have experience with python then you also make the good use of it.</p>
<p>There are two kinds of package which you can use.</p>
<ul>
<li>Prebuild Kernel Package</li>
<li>Prebuild Mesa Package</li>
<li>Custom Core Package</li>
</ul>
<p>Note: It doesn't matter what package you use, <code>prebuild-kernel</code> package is here to make it easier on making kernel packages quickly. There isn't any functional change between <code>custom-core</code> &amp; <code>prebuild-kernel</code> package.</p>
<p>Protip: If you want to build a Mesa/Kernel package easily, then the best way is to use the on-device GearLock GDK. (Means there is a option to <code>AutoMake Kernel/Mesa Package from your booted kernel/mesa</code> in <code>GearLock &gt;&gt; More &gt;&gt; Dev-Zone</code> on an android-x86 OS with GearLock installed)</p>
<h2>Setup build environment</h2>
<p>There are two ways in which you can work with gearlock packages.</p>
<ul>
<li>From an android-x86 system with <strong>GearLock</strong> installed.</li>
<li>Using the linux dev-kit for <strong>GearLock</strong><br><br></li>
</ul>
<h4>+ From an android-x86 system with <strong>GearLock</strong> installed</h4>
<hr />
<p>Either open <strong>GearLock App</strong> or run <code>gearlock</code> in Alt + F1 terminal.</p>
<p>Then go to <code>&gt;&gt; More &gt;&gt; Dev-Zone</code> and you should have all the extended dev-kit options.</p>
<p>Use option <code>1</code> to setup build environment<br><br></p>
<h4>+ Using the linux dev-kit for <strong>GearLock</strong></h4>
<hr />
<p>Clone the repo from github</p>
<pre><code class="language-bash">git clone https://github.com/AXIM0S/gearlock-dev-kit</code></pre>
<p>Execute <code>./configure</code> to setup build environment</p>
<p>To build your package/extension, execute <code>./build</code></p>
<h2>Custom-core package</h2>
<p>Structure of custom-core package:</p>
<pre><code class="language-bash">.
|-- !zygote.sh      &lt;-- Package functions and information (sourced by gearlock)
|
|-- data               &lt;-- Placeholder data folder
|
|-- gearlock           &lt;-- The gearlock folder
|   |
|   |-- dependencies   &lt;-- Common depdir ($GHOME/dependencies)
|   |
|   |-- extension.sh   &lt;-- Extension script for GearLock interface
|   |
|   |-- gearboot
|       |
|       |-- boot-comp.sh
|       |
|       |-- post-boot.sh
|       |
|       |-- post-fs-data.sh
|       |
|       |-- post-fs.sh
|
|-- install.sh      &lt;-- Initial script which is executed after package extraction
|
|-- readme.txt      &lt;-- Local readme file for the custom-core package
|
|-- system             &lt;-- Placeholder system folder
|
|-- uninstall.sh    &lt;-- An Empty uninstallation script

5 directories, 9 files (structure generated by `tree')</code></pre>
<h2>Pre-build kernel package</h2>
<p>The pre-build kernel package has everything ready for you.<br>
You have to just place your corresponding kernel files.</p>
<p>Structure of pre-build kernel package:</p>
<pre><code class="language-bash">.
|-- !zygote.sh      &lt;-- Package functions and information (sourced by gearlock)
|
|-- install.sh      &lt;-- A ready to use univarsal kernel installation script
|
|-- kernel          &lt;-- Placeholder kernel-zimage (replace with your kernel-zimage)
|
|-- readme.txt      &lt;-- Local readme file for the prebuild-kernel package
|
|-- system             &lt;-- The system folder
|
|   |-- lib            &lt;-- The lib folder
|       |
|       |-- firmware   &lt;-- You can include additional firmware (optional)
|       |
|       |-- modules    &lt;-- This is where you put the kernel module folder
|             
|-- uninstall.sh    &lt;-- A pre-configured uninstallation script for kernel packages

3 directories, 5 files (structure generated by `tree')</code></pre>
<h2>!zygote.sh configuration</h2>
<p><code>!zygote.sh</code> is the file which holds your package/extension information and defines how it will act upon installation through <strong>GearLock</strong>. You can either manually modify it or <code>dev-kit</code> will ask during build.</p>
<pre><code class="language-bash">#######################################################################################################
#####=============================== Package/Extension Information ===============================#####

NAME="Something_Cool" #Package/Extension Name

TYPE="Package" #Specify (Package / Extension)

AUTHOR="AXON" #Your name as the Developer/Owner/Packer

VERSION="v1.0" #Specify the Version of this package/extension

SHORTDESC="Bakes you a cake @<a href="cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="316e71">[email&#160;protected]</a>" #Provide a short description about this package/extension

C_EXTNAME="" #For Specifing a custom name for your extension script ($NAME is used if not defined)

#####=============================== Package/Extension Information ===============================#####
#######################################################################################################


#######################################################################################################
######=============================== Package/Extension Functions ===============================######

REQSYNC="yes" #Require Sync (Deafult - yes)

REQREBOOT="no" #(Deafult - no) Use if your package/extension modifies any major system file

GEN_UNINS="yes" #(Deafult - yes) If you want GearLock to generate a uninstallation script itself

SHOW_PROG="yes" #(Default - yes) Whether to show extraction progress while loading the pkg/extension

DEF_HEADER="yes" #(Default -yes) Whether to use the default header which print's the info during zygote

######=============================== Package/Extension Functions ===============================######
#######################################################################################################</code></pre>
<p>Note: All the variables in <code>!zygote.sh</code> are accessible within anything inside your package during installation.</p>
<h2>install.sh / uninstall.sh exit code</h2>
<p>Even if you do <code>exit</code> on your <code>install.sh</code> GearLock will attempt to run the additional jobs such as generating uninstallation script, checking for reboot request and so on. Because GearLock doesn't know whether you're assuming the operation successful or not. So, to tell GearLock that there has been an error and it shouldn't proceed further with the additional jobs then you can return special code which GearLock can read.</p>
<p>You can acheive this in the following way:</p>
<pre><code class="language-bash">exit 101</code></pre>
<p>For <code>uninstall.sh</code> you have to use <code>return 101</code> instead of <code>exit 101</code> since gearlock will convert it into a function.</p>
<h2>Extension script/executable</h2>
<p>If you want to push a script/executable which can operate whithin gearlock for users then you should do it on <code>./gearlock/extension.sh</code></p>
<p>Once someone install your package/extension, they will be able to execute the <code>extension</code> through <code>GearLock &gt; Extensions</code></p>
<p>Note: You don't have to manually copy or remove <code>extension.sh</code>, GearLock will take care of that.</p>
<p>If you're using <a href="gearlock.html#page-toc-2">custom-core</a> package and if you don't want to make an extension then you must delete <code>./gearlock/extension.sh</code></p>
<p><strong>Protip:</strong> For live-testing how a extension works, put any executable on <a href="gearlock/environment-variables.html#ghome">$GHOME</a>/extensions<br>Then do <code>GearLock &gt; Extensions</code></p>
<h2>GearBoot Executables</h2>
<p>GearBoot executables are executed during boot.<br>
Note: You don't have to manually copy or remove gearboot executables, GearLock will take care of that.
Check <a href="gearlock.html#page-toc-2">custom-core</a> package structure and <a href="https://supreme-gamers.com/gearlock/gearboot">GearBoot</a> page.</p>
<h2>Uninstallation modes</h2>
<p>GearLock Package Manager deals with package/extension uninstallation system with much effiency.<br>Which also includes auto uninstallation script generation.</p>
<p>There are three uninstallation modes.</p>
<ul>
<li>With <code>GEN_UNINS=yes</code> in <code>!zygote.sh</code> &amp; custom code in <code>uninstall.sh</code></li>
</ul>
<p>Merges generated uninstallation script and from <code>uninstall.sh</code></p>
<ul>
<li>With only <code>GEN_UNINS=yes</code> in <code>!zygote.sh</code> &amp; <code>uninstall.sh</code> removed</li>
</ul>
<p>Only merge generated uninstallation script</p>
<ul>
<li>With only <code>uninstall.sh</code> and <code>GEN_UNINS=no</code></li>
</ul>
<p>Only merge <code>uninstall.sh</code></p>
<p>Note: If you don't script any custom uninstallation code in <code>uninstall.sh</code> then you can either remove that file or just leave it as-is. Also, You don't have to manually copy or deal with <code>uninstall.sh</code>, GearLock will take care of putting it in the right place and removing it when necessary</p>
<p><br>When <code>GEN_UNINS</code> is set to <code>yes</code>, GearLock will generate an uninstallation script based on the files that you put on either <code>system</code> or <code>data</code> folder. You can also mix up/use <code>GEN_UNINS</code> and your custom <code>uninstall.sh</code> together.</p>
</article>
</main>
<nav class="page-toc">
<ul id="page-toc-container">
</ul>
</nav>
<script data-cfasync="false" src="cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script src="gearlock/themes/grl/scripts/highlight.js"></script>
<script src="gearlock/themes/grl/scripts/mousetrap.min.js"></script>
<script src="gearlock/themes/grl/scripts/clipboard.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
<script src="styles/assets/darkmode-js.min.js"></script>
<script>
  hljs.initHighlightingOnLoad();

  document.querySelectorAll('.menuitem a').forEach(function(el) {
    if (el.getAttribute('data-shortcut').length > 0) {
      Mousetrap.bind(el.getAttribute('data-shortcut'), function() {
        location.assign(el.getAttribute('href'));
      });
    }
  });

  /**
   * Generate page table of contents
   *
   * Get all H2 elements and render them in a list
  **/
  function generatePageTOC() {
    var tocContainer = document.getElementById('page-toc-container');

    document.querySelectorAll('.article h2').forEach(function(el, index) {
      // Insert a marker since anchor links breaks with css position sticky
      // sticky headers upwards are stacked at the top of the viewport
      // and therefore cannot be jumped to since they are already visible
      // Instead inject a hidden element to use as a scroll marker
      el.insertAdjacentHTML('beforebegin', '<i id="page-toc-'+index+'" class="page-toc-scroll-marker">TOC marker</i>');

      var newTocNavItem = document.createElement('li');
      var newTocNavItemLink = document.createElement('a');
      var newTocNavItemText = document.createTextNode(el.textContent);

      newTocNavItemLink.setAttribute('href', '#page-toc-' + index);
      newTocNavItemLink.appendChild(newTocNavItemText);
      newTocNavItem.appendChild(newTocNavItemLink);
      tocContainer.appendChild(newTocNavItem);
    });
  }
  generatePageTOC();

  /**
   * Copy to clipboard
   *
   * Powered by https://clipboardjs.com
  **/

  new ClipboardJS('.copy-to-clipboard-btn');

  // Attach id attribute to all pre > code elements and append a button
  document.querySelectorAll('pre code').forEach(function(el, index) {
    el.setAttribute('id', 'code-block-' + index);
  });

  // Add copy-to-clipboard buttons. Begin by wrapping all pre elements in a div...
  document.querySelectorAll('pre').forEach(function(el, index) {

    // Create the wrapper div and apply classes on it
    var wrapper = document.createElement('div');
    wrapper.classList.add('code-block-container');

    // Place the wrapper div before the pre element
    el.parentNode.insertBefore(wrapper, el);

    // Move the pre element inside the wrapper div
    wrapper.appendChild(el);

    // Append a copy to clipboard button after each code block
    wrapper.insertAdjacentHTML('beforeend', `
      <button type="button" class="copy-to-clipboard-btn" data-clipboard-target="#code-block-${index}">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0H24V24H0z"/><path fill="currentColor" d="M13 11L11 11 11 14 8 14 8 16 11 16 11 19 13 19 13 16 16 16 16 14 13 14z"/><path fill="currentColor" d="M19 5h-2V3h-1.142c-.447-1.72-2-3-3.858-3S8.589 1.28 8.142 3H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2V7c0-1.103-.897-2-2-2zm-7-3c.739 0 1.385.402 1.731 1h-3.463c.347-.598.993-1 1.732-1zM9 5h6v2H9V5zm10 16H5V7h2v2h10V7h2v14z"/></svg>
      </button>
    `);
  });
    anchors.add();
    new Darkmode().showWidget();
</script>
</body>
</html>
